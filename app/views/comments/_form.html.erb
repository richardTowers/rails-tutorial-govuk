<%= form_with model: [ article, article.comments.build ] do |form| %>
  <% commenter_error = form.object.errors[:commenter].present? %>
  <%= tag.div class: ["govuk-form-group", ("govuk-form-group--error" if commenter_error)] do %>
    <h3 class="govuk-label-wrapper">
      <%= form.label :commenter, class: "govuk-label govuk-label--s" %>
    </h3>
    <% if commenter_error %>
      <p id="commenter-error" class="govuk-error-message">
        <span class="govuk-visually-hidden">Error:</span> <%= form.errors.where(:commenter).map(&:full_message).join(",") %>
      </p>
    <% end %>
    <%=
      form.text_field :commenter,
                      class: [ "govuk-input", ("govuk-input--error" if commenter_error) ],
                      "aria-describedby": ("commenter-error" if commenter_error)
    %>
  <% end %>
  <% body_error = form.object.errors[:body].present? %>
  <%= tag.div class: ["govuk-form-group", ("govuk-form-group--error" if body_error)] do %>
    <h3 class="govuk-label-wrapper">
      <%= form.label :body, class: "govuk-label govuk-label--s" %>
    </h3>
    <% if body_error %>
      <p id="body-error" class="govuk-error-message">
        <span class="govuk-visually-hidden">Error:</span> <%= form.errors.where(:body).map(&:full_message).join(",") %>
      </p>
    <% end %>
    <%=
      form.text_area :body,
                     class: [ "govuk-input", ("govuk-input--error" if body_error) ],
                     "aria-describedby": ("body-error" if body_error)
    %>
  <% end %>
  <div class="govuk-form-group">
    <h2 class="govuk-label-wrapper">
      <%= form.label :status, class: "govuk-label govuk-label--m" %>
    </h2>
    <%= form.select :status, Visible::VALID_STATUSES, { selected: article.status || 'public' }, class: "govuk-select" %>
  </div>
  <div>
    <%= form.submit class: "govuk-button" %>
  </div>
<% end %>